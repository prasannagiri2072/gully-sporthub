{% load static %}

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
      integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
      crossorigin="anonymous">
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

<!-- Icon CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<!-- Custom CSS -->
<link rel="stylesheet" href="{% static 'css/mystyle.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link rel="icon" href="{% static 'images/donation.png' %}">
<title>Gully Sports Hub</title>
<!-- Start Nagigation -->
<nav class="navbar navbar-expand-sm navbar-light custom-navbar">
    <div class="container-fluid">
        <a href="#" class="navbar-brand">
            
           
        <!--<span class="navbar-text blinking">Enjoy Programming</span>-->
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#myMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse text-center" id="myMenu">
            <ul class="navbar-nav pl-5 custom-nav ml-auto">
                
                <a href="{% url 'home' %}" class="nav-link">
                    <i class="fa fa-home" aria-hidden="true"></i> Home
                </a>
                
                {% if not request.user.is_authenticated %}
                
                <li class="nav-item"><a href="{% url 'userlogin' %}" class="nav-link">Login</a></li>
                <li class="nav-item"><a href="{% url 'registration' %}" class="nav-link">Signup</a></li>
                <li class="nav-item"><a href="{% url 'admin_login' %}" class="nav-link">Admin Login</a></li>
                
                
                {% else %}
                
                
                
                    
                    <div class="d-flex dropstart">
                        <div class="collapse navbar-collapse dropstart" id="navbarNavDarkDropdown">
                      <ul class="navbar-nav">
                        <li class="nav-item dropdown dropdown-menu-start">
                          <a class="nav-link " href="#"  data-bs-toggle="dropdown" aria-expanded="false">
                            <i id="bellCount" class="fa-solid fa-bell" data-count="0" ></i>
                          </a>
                          <ul class="dropdown-menu dropdown-menu-dark  text-wrap" id="notify" style="width: 300px !important;"></ul>
                        </li>
                      </ul>
                        </div>
                    </div>
                      
                  
                  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
                
                
                                
                
                <li class="nav-item dropdown">
                    <a class="nav-link " href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <img src="{% static 'images/useravatar.jpg' %}"
                          style="width:40px;height:40px;border-radius:50%"/>
                 </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="{%url 'profile'%}">Profile</a>
                        <a class="dropdown-item" href="{%url 'change_password'%}">Change Password</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="/logout/">Logout</a>
                    </div>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav> <!-- End Navigation -->
{% block body %}{% endblock %}

<style>
    /* Custom Navbar Styles */
    .custom-navbar {
        background-color: #3498db; /* Blue color for the navbar */
        padding: 5px 20px; /* Add padding for better spacing */
    }
    .custom-navbar {
        position: fixed;
    
        width: 100%;
        z-index: 1000; /* Adjust z-index as needed */
      }

    .navbar-brand {
        color: #fff; /* White color for the brand text */
        font-weight: bold; /* Make the brand text bold */
    }

    .navbar-toggler-icon {
        border-color: #fff; /* White color for the navbar toggler icon */
    }

    .navbar-nav {
        display: flex;
        align-items: center; /* Center the items vertically */
        margin-left: auto; /* Push the navbar items to the right */
    }

    .nav-link {
        color: #fff !important; /* White color for the nav links */
        margin-right: 35px; /* Add spacing between nav links */
    }

    .nav-link:hover {
        color: #f0f0f0 !important; /* Lighten the color on hover */
    }

    .dropdown-menu {
        background-color: #2c3e50; /* Dark color for the dropdown menu */
    }

    .dropdown-item {
        color: #fff !important; /* White color for the dropdown items */
    }

    .dropdown-item:hover {
        background-color: #34495e; /* Darken the background on hover */
    }

    .fa-solid {
        font-size: 20px; 
    }

    
    #bellCount[data-count]:after {
        content: attr(data-count);
        font-size: 70%;
        margin-left: -10px; 
        margin-top: -13px;  
        font-weight: bold; 
        color: red; 
    }
    

    /* Responsive Styles */
    @media (max-width: 576px) {
        .navbar-nav {
            margin-left: 0;
            flex-direction: column; 
            align-items: flex-start;
        }

        .nav-link {
            margin-right: 0; 
            margin-bottom: 5px;
        }
    }
    /* Add this CSS to your stylesheet or in a <style> tag in your HTML */
button.accept-button,
button.reject-button {
    padding: 8px 16px;
    margin: 5px;
    cursor: pointer;
    border: none;
    border-radius: 4px;
    font-size: 14px;
    font-weight: bold;
}

button.accept-button {
    background-color: #4CAF50; /* Green */
    color: white;
}

button.reject-button {
    background-color: #f44336; /* Red */
    color: white;
}

</style>


 





<script>
    // setup chat scoket
    const notifyScoket = new WebSocket(
        'ws://'
        + window.location.host
        + '/ws/notify/'
    );

    // on socket open
    notifyScoket.onopen = function (e) {
        console.log('Socket successfully connected.');
    };

    // on socket close
    notifyScoket.onclose = function (e) {
        console.log('Socket closed unexpectedly');
    };

    // on receiving message on group
    notifyScoket.onmessage = function (e) {
        const data = JSON.parse(e.data);
        const message = data.message;
        // Call the setMessage function to add the new li element
        setMessage(message);

    };

    function setMessage(message) {
        // Create a new li element
        
        var newLi = document.createElement('li');
    
        // Create a new anchor element for the notification message
        var newAnchor = document.createElement('a');
        newAnchor.className = 'dropdown-item text-wrap';
        newAnchor.textContent = message;
    
        // Create "Accept" and "Reject" buttons
        var acceptButton = document.createElement('button');
        acceptButton.className = 'accept-button';
        acceptButton.textContent = 'Accept';
        acceptButton.addEventListener('click', function() {
            // Handle the accept logic here, e.g., make an AJAX request
            console.log('Accepted');
        });
    
        var rejectButton = document.createElement('button');
        rejectButton.className = 'reject-button';
        rejectButton.textContent = 'Reject';
        rejectButton.addEventListener('click', function() {
            // Handle the reject logic here, e.g., make an AJAX request
            console.log('Rejected');
        });
    
        // Append the buttons to the li element
        newLi.appendChild(newAnchor);
        newLi.appendChild(acceptButton);
        newLi.appendChild(rejectButton);
    
        // Get the ul element with the id "notify"
        var ulElement = document.getElementById('notify');
    
        // Append the new li element to the ul element
        ulElement.appendChild(newLi);
    
        // Getting the count and updating it
        count = document.getElementById('bellCount').getAttribute('data-count');
        document.getElementById('bellCount').setAttribute('data-count', parseInt(count) + 1);
    }
        
        
    


</script>
{% for i in messages %}
<script>
    // JavaScript code


    alert('{{i}}');
    
        $(document).ready(function () {
            $('.collapse').on('show.bs.collapse', function () {
                $(this).addClass('show');
            });
    
            $('.collapse').on('hide.bs.collapse', function () {
                $(this).removeClass('show');
            });
        });

    
</script>
{% endfor %}

